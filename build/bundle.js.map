{"version":3,"sources":["webpack:///webpack/bootstrap 720c20313c6f1baf4b83","webpack:///./js/main.js","webpack:///./js/webgl.js","webpack:///./~/blob-util/lib/index.js","webpack:///./~/blob/index.js","webpack:///./~/native-or-lie/index.js","webpack:///./~/lie/lib/browser.js","webpack:///./~/immediate/lib/browser.js","webpack:///./js/assetmgr.js","webpack:///./js/math.js","webpack:///./js/states/preloader.js","webpack:///./js/gfxutils.js","webpack:///./js/states/loader.js"],"names":[],"mappings":"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CA,iBAAgB;AAChB;AACA,0EAAyE,8BAA8B;AACvG;AACA,YAAW,MAAM;AACjB,YAAW,OAAO,+BAA+B,oBAAoB;AACrE,cAAa;AACb;AACA;AACA;AACA;AACA,gBAAe,eAAe;AAC9B;AACA;AACA;;AAEA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA,YAAW,KAAK;AAChB,cAAa,OAAO;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA,4BAA2B;AAC3B;AACA;AACA,YAAW,OAAO;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAW,KAAK;AAChB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,iBAAiB;AAC5B,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA,sCAAqC,WAAW;AAChD,IAAG;AACH;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,iBAAiB;AAC5B,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA,YAAW,KAAK;AAChB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA,gCAA+B;AAC/B;AACA,YAAW,OAAO;AAClB,cAAa,QAAQ;AACrB;AACA;AACA;AACA,wCAAuC;AACvC;;AAEA;AACA,gCAA+B,WAAW;AAC1C,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,iBAAiB;AAC5B,YAAW,iBAAiB;AAC5B;AACA,YAAW,iBAAiB;AAC5B;AACA,cAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;;AAEA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,iBAAiB;AAC5B,YAAW,iBAAiB;AAC5B;AACA,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,QAAO;AACP;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAW,OAAO;AAClB,YAAW,iBAAiB;AAC5B,YAAW,iBAAiB;AAC5B;AACA,YAAW,iBAAiB;AAC5B;AACA,cAAa,QAAQ;AACrB;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA,YAAW,YAAY;AACvB,YAAW,iBAAiB;AAC5B,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA,YAAW,KAAK;AAChB,cAAa,QAAQ;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;ACpTA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,EAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA,EAAC;;AAED;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,kBAAiB,gBAAgB;AACjC;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA,kBAAiB,gBAAgB;AACjC;AACA;;AAEA;AACA;;AAEA;AACA;AACA,qCAAoC;AACpC;;AAEA;AACA;AACA;AACA,IAAG;AACH;AACA,IAAG;AACH;AACA;AACA,EAAC;;;;;;;;AC/FD;;;;;;;ACAA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA,IAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;;;;;;;AC5PA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAK;AACL;AACA;AACA;AACA,IAAG;AACH;AACA;AACA;AACA;AACA;AACA,IAAG;AACH;;AAEA,oCAAmC;AACnC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;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","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n/** WEBPACK FOOTER **\n ** webpack/bootstrap 720c20313c6f1baf4b83\n **/","import {WebGLRenderer} from \"./webgl.js\";\nimport {PreloaderState} from \"./states/preloader.js\";\nimport {AssetManager} from \"./assetmgr.js\";\n\nlet game = {};\n\nwindow.onload = () => {\n  let canvas = document.getElementById(\"gamecanvas\");\n  game.render = WebGLRenderer(game, canvas, canvas.getContext(\"webgl\"));\n  game.switchState = (newstate) => {\n    if(game.state && game.state.destroy) {\n      game.state.destroy();\n    }\n    game.state = newstate;\n    if(newstate.initialize) {\n      newstate.initialize();\n    }\n  };\n  \n  game.switchState(PreloaderState(game));\n\n  AssetManager.addAssetLoader(game.render.createAssetLoader());\n\n\n  \n  let lastTick = performance.now();\n  game.tick = (timestamp) => {\n    let delta = timestamp - lastTick;\n    lastTick = timestamp;\n\n    game.render.manageSize();\n    \n    if(game.state && game.state.tick) {\n      game.state.tick(delta);\n    }\n\n    window.requestAnimationFrame(game.tick);\n  };\n  window.requestAnimationFrame(game.tick);\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/main.js\n **/","import * as BlobUtil from \"blob-util\";\n\nimport {AssetManager} from \"./assetmgr.js\";\nimport {Mat4} from \"./math.js\";\n\nexport let WebGLRenderer = (game, canvas, gl) => {\n  return {\n    manageSize() {\n      if(canvas.width != window.innerWidth || canvas.height != window.innerHeight) {\n        canvas.width = window.innerWidth;\n        canvas.height = window.innerHeight;\n\n        gl.viewport(0, 0, canvas.width, canvas.height);\n        \n        if(game.state && game.state.updateSize) {\n          game.state.updateSize(canvas.width, canvas.height);\n        }\n      }\n    },\n\n    clear(color) {\n      gl.clearColor(color.r, color.g, color.b, color.a);\n      gl.clear(gl.COLOR_BUFFER_BIT | gl.DEPTH_BUFFER_BIT);\n    },\n\n    width() {\n      return canvas.width;\n    },\n    height() {\n      return canvas.height;\n    },\n\n    createAssetLoader() {\n      let loaders = {\n        \"shader\": (placeholder) => {\n          if(placeholder.spec.shadertype == \"fragment\" || placeholder.spec.shadertype == \"vertex\") {\n            return AssetManager.getFile(placeholder.spec.src).then((blob) => {\n              return BlobUtil.blobToBinaryString(blob);\n            }).then((src) => {\n              let shader = gl.createShader({fragment: gl.FRAGMENT_SHADER, vertex: gl.VERTEX_SHADER}[placeholder.spec.shadertype]);\n              gl.shaderSource(shader, src);\n              gl.compileShader(shader);\n              if(!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n                let log = gl.getShaderInfoLog(shader);\n                gl.deleteShader(shader);\n                throw \"Could not compile shader: \" + log;\n              }\n\n              return shader;\n            });\n          }\n          if(placeholder.spec.shadertype == \"program\") {\n            let promises = placeholder.spec.shaders.map((id) => {\n              return placeholder.depend(id);\n            });\n            return Promise.all(promises).then((shaders) => {\n              let program = gl.createProgram();\n              for(let i = 0; i < shaders.length; i++) {\n                gl.attachShader(program, shaders[i]);\n              }\n              gl.linkProgram(program);\n\n              if(!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n                throw \"Could not link program: \" + gl.getProgramInfoLog(program);\n              }\n\n              let runtime = {\n                stride: 0,\n                numComponents: 0\n              };\n\n              let attribOffset = 0;\n              let attributes = placeholder.spec.attributes.map((attrib) => {\n                let loc = gl.getAttribLocation(program, attrib.name);\n                if(loc == -1) {\n                  throw \"Could not find attribute '\" + attrib.name + \"'\";\n                }\n                runtime.stride+= attrib.components * 4; // 4 bytes / float\n                runtime.numComponents+= attrib.components;\n                \n                attrib.location = loc;\n                attrib.runtime = {};\n                attrib.runtime.components = [];\n                attrib.runtime.offset = attribOffset;\n                attribOffset+= attrib.components * 4; // 4 bytes / float\n                attrib.runtime.loadData = (args, i) => {\n                  switch(attrib.datatype) {\n                  case \"color\":\n                    let arg = args[i++];\n                    attrib.runtime.components[0] = arg.r;\n                    attrib.runtime.components[1] = arg.g;\n                    attrib.runtime.components[2] = arg.b;\n                    break;\n                  case \"vec3\":\n                    for(let j = 0; j < attrib.components; j++) {\n                      attrib.runtime.components[j] = args[i++];\n                    }\n                    break;\n                  default:\n                    throw \"bad attribute data type '\" + attrib.datatype + \"'\";\n                  }\n\n                  return i;\n                };\n\n                return attrib;\n              });\n\n              let uniforms = {};\n              for(let i = 0; i < placeholder.spec.uniforms.length; i++) {\n                let uniform = placeholder.spec.uniforms[i];\n                let loc = gl.getUniformLocation(program, uniform);\n                if(loc == -1) {\n                  throw \"Could not find uniform '\" + uniform + \"'\";\n                }\n\n                uniforms[uniform] = loc;\n              }\n\n              \n              return {\n                program,\n                attributes,\n                uniforms,\n                runtime\n              };\n            });\n          }\n          throw \"bad shadertype: \" + placeholder.spec.shadertype\n        }\n      };\n      \n      return {\n        canLoad(placeholder) {\n          return loaders[placeholder.spec.type] != undefined;\n        },\n        load(placeholder) {\n          return loaders[placeholder.spec.type](placeholder);\n        }\n      };\n    },\n\n    createLayer(shader) {\n      let quads = 1024;\n      \n      let vertBuffer = gl.createBuffer();\n      gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);\n\n      let perVertex = [];\n      let perShape = [];\n      for(let i = 0; i < shader.attributes.length; i++) {\n        let attrib = shader.attributes[i];\n\n        switch(attrib.type) {\n        case \"per-vertex\":\n          perVertex.push(attrib);\n          break;\n        case \"per-shape\":\n          perShape.push(attrib);\n          break;\n        default:\n          throw \"Bad attribute type '\" + attrib.type + \"' on \" + attrib.name;\n        }\n      }\n      \n      let buffer = new Float32Array(quads\n                                    * 2 // 2 triangles per quad\n                                    * 3 // 3 vertices per triangle\n                                    * shader.runtime.numComponents);\n      let bp = 0; // buffer pos\n      let numTris = 0;\n      \n      gl.bufferData(gl.ARRAY_BUFFER, buffer, gl.DYNAMIC_DRAW);\n\n      let bufferFromAttributes = () => {\n        for(let i = 0; i < shader.attributes.length; i++) {\n          let attrib = shader.attributes[i];\n          for(let j = 0; j < attrib.components; j++) {\n            buffer[bp++] = attrib.runtime.components[j];\n          }\n        }\n      };\n      \n      let self = {\n        matrix: Mat4.create(),\n\n        createRectDrawer() { // trades flexibility for lack of allocations\n          let params = []\n          \n          let self2 = {\n            drawColoredRect(color, x1, y1, x2, y2) {\n              let i = 0;\n              params[i++] = color;\n              params[i++] = x1;\n              params[i++] = y1;\n              params[i++] = 0;\n              params[i++] = x2;\n              params[i++] = y1;\n              params[i++] = 0;\n              params[i++] = x1;\n              params[i++] = y2;\n              params[i++] = 0;\n              params[i++] = x2;\n              params[i++] = y2;\n              params[i++] = 0;\n\n              self.drawQuad(params);\n            }\n          };\n          return self2;\n        },\n        \n        drawQuad(args) {\n          //let args = arguments;\n          let argI = 0;\n          for(let i = 0; i < perShape.length; i++) {\n            argI = perShape[i].runtime.loadData(args, argI);\n          }\n          \n          for(let i = 0; i < perVertex.length; i++) {\n            argI = perVertex[i].runtime.loadData(args, argI);\n          }\n          bufferFromAttributes();\n          let tri2argI = argI;\n          for(let h = 0; h < 2; h++) {\n            for(let i = 0; i < perVertex.length; i++) {\n              argI = perVertex[i].runtime.loadData(args, argI);\n            }\n            bufferFromAttributes();\n          }\n          argI = tri2argI; //rewind argument iterator to where it was after the first vertex was read\n          for(let h = 0; h < 3; h++) {\n            for(let i = 0; i < perVertex.length; i++) {\n              argI = perVertex[i].runtime.loadData(args, argI);\n            }\n            bufferFromAttributes();\n          }\n          \n          numTris+= 2;\n        },\n\n        flush: () => {\n          gl.bindBuffer(gl.ARRAY_BUFFER, vertBuffer);\n          gl.bufferSubData(gl.ARRAY_BUFFER, 0, buffer);\n\n          gl.useProgram(shader.program);\n\n          for(let i = 0; i < shader.attributes.length; i++) {\n            let attrib = shader.attributes[i];\n            gl.enableVertexAttribArray(attrib.location);\n            gl.vertexAttribPointer(attrib.location,\n                                   attrib.components,\n                                   gl.FLOAT, false,\n                                   shader.runtime.stride,\n                                   attrib.runtime.offset);\n          }\n          \n          gl.uniformMatrix4fv(shader.uniforms.matrix, false, self.matrix.toGL());\n          \n          gl.drawArrays(gl.TRIANGLES, 0, numTris * 3);\n\n          for(let i = 0; i < shader.attributes.length; i++) {\n            gl.disableVertexAttribArray(shader.attributes[i].location);\n          }\n          \n          bp = 0;\n          numTris = 0;\n        }\n      };\n\n      return self;\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/webgl.js\n **/","'use strict';\n\n/* jshint -W079 */\nvar Blob = require('blob');\nvar Promise = require('native-or-lie');\n\n//\n// PRIVATE\n//\n\n// From http://stackoverflow.com/questions/14967647/ (continues on next line)\n// encode-decode-image-with-base64-breaks-image (2013-04-21)\nfunction binaryStringToArrayBuffer(binary) {\n  var length = binary.length;\n  var buf = new ArrayBuffer(length);\n  var arr = new Uint8Array(buf);\n  var i = -1;\n  while (++i < length) {\n    arr[i] = binary.charCodeAt(i);\n  }\n  return buf;\n}\n\n// Can't find original post, but this is close\n// http://stackoverflow.com/questions/6965107/ (continues on next line)\n// converting-between-strings-and-arraybuffers\nfunction arrayBufferToBinaryString(buffer) {\n  var binary = '';\n  var bytes = new Uint8Array(buffer);\n  var length = bytes.byteLength;\n  var i = -1;\n  while (++i < length) {\n    binary += String.fromCharCode(bytes[i]);\n  }\n  return binary;\n}\n\n// doesn't download the image more than once, because\n// browsers aren't dumb. uses the cache\nfunction loadImage(src, crossOrigin) {\n  return new Promise(function (resolve, reject) {\n    var img = new Image();\n    if (crossOrigin) {\n      img.crossOrigin = crossOrigin;\n    }\n    img.onload = function () {\n      resolve(img);\n    };\n    img.onerror = reject;\n    img.src = src;\n  });\n}\n\nfunction imgToCanvas(img) {\n  var canvas = document.createElement('canvas');\n\n  canvas.width = img.width;\n  canvas.height = img.height;\n\n  // copy the image contents to the canvas\n  var context = canvas.getContext('2d');\n  context.drawImage(\n    img,\n    0, 0,\n    img.width, img.height,\n    0, 0,\n    img.width, img.height);\n\n  return canvas;\n}\n\n//\n// PUBLIC\n//\n\n/**\n * Shim for\n * [new Blob()]{@link https://developer.mozilla.org/en-US/docs/Web/API/Blob.Blob}\n * to support\n * [older browsers that use the deprecated <code>BlobBuilder</code> API]{@link http://caniuse.com/blob}.\n *\n * @param {Array} parts - content of the <code>Blob</code>\n * @param {Object} options - usually just <code>{type: myContentType}</code>\n * @returns {Blob}\n */\nfunction createBlob(parts, options) {\n  options = options || {};\n  if (typeof options === 'string') {\n    options = {type: options}; // do you a solid here\n  }\n  return new Blob(parts, options);\n}\n\n/**\n * Shim for\n * [URL.createObjectURL()]{@link https://developer.mozilla.org/en-US/docs/Web/API/URL.createObjectURL}\n * to support browsers that only have the prefixed\n * <code>webkitURL</code> (e.g. Android <4.4).\n * @param {Blob} blob\n * @returns {string} url\n */\nfunction createObjectURL(blob) {\n  return (window.URL || window.webkitURL).createObjectURL(blob);\n}\n\n/**\n * Shim for\n * [URL.revokeObjectURL()]{@link https://developer.mozilla.org/en-US/docs/Web/API/URL.revokeObjectURL}\n * to support browsers that only have the prefixed\n * <code>webkitURL</code> (e.g. Android <4.4).\n * @param {string} url\n */\nfunction revokeObjectURL(url) {\n  return (window.URL || window.webkitURL).revokeObjectURL(url);\n}\n\n/**\n * Convert a <code>Blob</code> to a binary string. Returns a Promise.\n *\n * @param {Blob} blob\n * @returns {Promise} Promise that resolves with the binary string\n */\nfunction blobToBinaryString(blob) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n    var hasBinaryString = typeof reader.readAsBinaryString === 'function';\n    reader.onloadend = function (e) {\n      var result = e.target.result || '';\n      if (hasBinaryString) {\n        return resolve(result);\n      }\n      resolve(arrayBufferToBinaryString(result));\n    };\n    reader.onerror = reject;\n    if (hasBinaryString) {\n      reader.readAsBinaryString(blob);\n    } else {\n      reader.readAsArrayBuffer(blob);\n    }\n  });\n}\n\n/**\n * Convert a base64-encoded string to a <code>Blob</code>. Returns a Promise.\n * @param {string} base64\n * @param {string|undefined} type - the content type (optional)\n * @returns {Promise} Promise that resolves with the <code>Blob</code>\n */\nfunction base64StringToBlob(base64, type) {\n  return Promise.resolve().then(function () {\n    var parts = [binaryStringToArrayBuffer(atob(base64))];\n    return type ? createBlob(parts, {type: type}) : createBlob(parts);\n  });\n}\n\n/**\n * Convert a binary string to a <code>Blob</code>. Returns a Promise.\n * @param {string} binary\n * @param {string|undefined} type - the content type (optional)\n * @returns {Promise} Promise that resolves with the <code>Blob</code>\n */\nfunction binaryStringToBlob(binary, type) {\n  return Promise.resolve().then(function () {\n    return base64StringToBlob(btoa(binary), type);\n  });\n}\n\n/**\n * Convert a <code>Blob</code> to a binary string. Returns a Promise.\n * @param {Blob} blob\n * @returns {Promise} Promise that resolves with the binary string\n */\nfunction blobToBase64String(blob) {\n  return blobToBinaryString(blob).then(function (binary) {\n    return btoa(binary);\n  });\n}\n\n/**\n * Convert a data URL string\n * (e.g. <code>'data:image/png;base64,iVBORw0KG...'</code>)\n * to a <code>Blob</code>. Returns a Promise.\n * @param {string} dataURL\n * @returns {Promise} Promise that resolves with the <code>Blob</code>\n */\nfunction dataURLToBlob(dataURL) {\n  return Promise.resolve().then(function () {\n    var type = dataURL.match(/data:([^;]+)/)[1];\n    var base64 = dataURL.replace(/^[^,]+,/, '');\n\n    var buff = binaryStringToArrayBuffer(atob(base64));\n    return createBlob([buff], {type: type});\n  });\n}\n\n/**\n * Convert an image's <code>src</code> URL to a data URL by loading the image and painting\n * it to a <code>canvas</code>. Returns a Promise.\n *\n * <p/>Note: this will coerce the image to the desired content type, and it\n * will only paint the first frame of an animated GIF.\n *\n * @param {string} src\n * @param {string|undefined} type - the content type (optional, defaults to 'image/png')\n * @param {string|undefined} crossOrigin - for CORS-enabled images, set this to\n *                                         'Anonymous' to avoid \"tainted canvas\" errors\n * @param {number|undefined} quality - a number between 0 and 1 indicating image quality\n *                                     if the requested type is 'image/jpeg' or 'image/webp'\n * @returns {Promise} Promise that resolves with the data URL string\n */\nfunction imgSrcToDataURL(src, type, crossOrigin, quality) {\n  type = type || 'image/png';\n\n  return loadImage(src, crossOrigin).then(function (img) {\n    return imgToCanvas(img);\n  }).then(function (canvas) {\n    return canvas.toDataURL(type, quality);\n  });\n}\n\n/**\n * Convert a <code>canvas</code> to a <code>Blob</code>. Returns a Promise.\n * @param {string} canvas\n * @param {string|undefined} type - the content type (optional, defaults to 'image/png')\n * @param {number|undefined} quality - a number between 0 and 1 indicating image quality\n *                                     if the requested type is 'image/jpeg' or 'image/webp'\n * @returns {Promise} Promise that resolves with the <code>Blob</code>\n */\nfunction canvasToBlob(canvas, type, quality) {\n  return Promise.resolve().then(function () {\n    if (typeof canvas.toBlob === 'function') {\n      return new Promise(function (resolve) {\n        canvas.toBlob(resolve, type, quality);\n      });\n    }\n    return dataURLToBlob(canvas.toDataURL(type, quality));\n  });\n}\n\n/**\n * Convert an image's <code>src</code> URL to a <code>Blob</code> by loading the image and painting\n * it to a <code>canvas</code>. Returns a Promise.\n *\n * <p/>Note: this will coerce the image to the desired content type, and it\n * will only paint the first frame of an animated GIF.\n *\n * @param {string} src\n * @param {string|undefined} type - the content type (optional, defaults to 'image/png')\n * @param {string|undefined} crossOrigin - for CORS-enabled images, set this to\n *                                         'Anonymous' to avoid \"tainted canvas\" errors\n * @param {number|undefined} quality - a number between 0 and 1 indicating image quality\n *                                     if the requested type is 'image/jpeg' or 'image/webp'\n * @returns {Promise} Promise that resolves with the <code>Blob</code>\n */\nfunction imgSrcToBlob(src, type, crossOrigin, quality) {\n  type = type || 'image/png';\n\n  return loadImage(src, crossOrigin).then(function (img) {\n    return imgToCanvas(img);\n  }).then(function (canvas) {\n    return canvasToBlob(canvas, type, quality);\n  });\n}\n\n/**\n * Convert an <code>ArrayBuffer</code> to a <code>Blob</code>. Returns a Promise.\n *\n * @param {ArrayBuffer} buffer\n * @param {string|undefined} type - the content type (optional)\n * @returns {Promise} Promise that resolves with the <code>Blob</code>\n */\nfunction arrayBufferToBlob(buffer, type) {\n  return Promise.resolve().then(function () {\n    return createBlob([buffer], type);\n  });\n}\n\n/**\n * Convert a <code>Blob</code> to an <code>ArrayBuffer</code>. Returns a Promise.\n * @param {Blob} blob\n * @returns {Promise} Promise that resolves with the <code>ArrayBuffer</code>\n */\nfunction blobToArrayBuffer(blob) {\n  return new Promise(function (resolve, reject) {\n    var reader = new FileReader();\n    reader.onloadend = function (e) {\n      var result = e.target.result || new ArrayBuffer(0);\n      resolve(result);\n    };\n    reader.onerror = reject;\n    reader.readAsArrayBuffer(blob);\n  });\n}\n\nmodule.exports = {\n  createBlob         : createBlob,\n  createObjectURL    : createObjectURL,\n  revokeObjectURL    : revokeObjectURL,\n  imgSrcToBlob       : imgSrcToBlob,\n  imgSrcToDataURL    : imgSrcToDataURL,\n  canvasToBlob       : canvasToBlob,\n  dataURLToBlob      : dataURLToBlob,\n  blobToBase64String : blobToBase64String,\n  base64StringToBlob : base64StringToBlob,\n  binaryStringToBlob : binaryStringToBlob,\n  blobToBinaryString : blobToBinaryString,\n  arrayBufferToBlob  : arrayBufferToBlob,\n  blobToArrayBuffer  : blobToArrayBuffer\n};\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/blob-util/lib/index.js\n ** module id = 2\n ** module chunks = 0\n **/","/**\n * Create a blob builder even when vendor prefixes exist\n */\n\nvar BlobBuilder = global.BlobBuilder\n  || global.WebKitBlobBuilder\n  || global.MSBlobBuilder\n  || global.MozBlobBuilder;\n\n/**\n * Check if Blob constructor is supported\n */\n\nvar blobSupported = (function() {\n  try {\n    var a = new Blob(['hi']);\n    return a.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if Blob constructor supports ArrayBufferViews\n * Fails in Safari 6, so we need to map to ArrayBuffers there.\n */\n\nvar blobSupportsArrayBufferView = blobSupported && (function() {\n  try {\n    var b = new Blob([new Uint8Array([1,2])]);\n    return b.size === 2;\n  } catch(e) {\n    return false;\n  }\n})();\n\n/**\n * Check if BlobBuilder is supported\n */\n\nvar blobBuilderSupported = BlobBuilder\n  && BlobBuilder.prototype.append\n  && BlobBuilder.prototype.getBlob;\n\n/**\n * Helper function that maps ArrayBufferViews to ArrayBuffers\n * Used by BlobBuilder constructor and old browsers that didn't\n * support it in the Blob constructor.\n */\n\nfunction mapArrayBufferViews(ary) {\n  for (var i = 0; i < ary.length; i++) {\n    var chunk = ary[i];\n    if (chunk.buffer instanceof ArrayBuffer) {\n      var buf = chunk.buffer;\n\n      // if this is a subarray, make a copy so we only\n      // include the subarray region from the underlying buffer\n      if (chunk.byteLength !== buf.byteLength) {\n        var copy = new Uint8Array(chunk.byteLength);\n        copy.set(new Uint8Array(buf, chunk.byteOffset, chunk.byteLength));\n        buf = copy.buffer;\n      }\n\n      ary[i] = buf;\n    }\n  }\n}\n\nfunction BlobBuilderConstructor(ary, options) {\n  options = options || {};\n\n  var bb = new BlobBuilder();\n  mapArrayBufferViews(ary);\n\n  for (var i = 0; i < ary.length; i++) {\n    bb.append(ary[i]);\n  }\n\n  return (options.type) ? bb.getBlob(options.type) : bb.getBlob();\n};\n\nfunction BlobConstructor(ary, options) {\n  mapArrayBufferViews(ary);\n  return new Blob(ary, options || {});\n};\n\nmodule.exports = (function() {\n  if (blobSupported) {\n    return blobSupportsArrayBufferView ? global.Blob : BlobConstructor;\n  } else if (blobBuilderSupported) {\n    return BlobBuilderConstructor;\n  } else {\n    return undefined;\n  }\n})();\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/blob/index.js\n ** module id = 3\n ** module chunks = 0\n **/","module.exports = typeof Promise === 'function' ? Promise : require('lie');\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/native-or-lie/index.js\n ** module id = 4\n ** module chunks = 0\n **/","'use strict';\nvar immediate = require('immediate');\n\n/* istanbul ignore next */\nfunction INTERNAL() {}\n\nvar handlers = {};\n\nvar REJECTED = ['REJECTED'];\nvar FULFILLED = ['FULFILLED'];\nvar PENDING = ['PENDING'];\n\nmodule.exports = Promise;\n\nfunction Promise(resolver) {\n  if (typeof resolver !== 'function') {\n    throw new TypeError('resolver must be a function');\n  }\n  this.state = PENDING;\n  this.queue = [];\n  this.outcome = void 0;\n  if (resolver !== INTERNAL) {\n    safelyResolveThenable(this, resolver);\n  }\n}\n\nPromise.prototype[\"catch\"] = function (onRejected) {\n  return this.then(null, onRejected);\n};\nPromise.prototype.then = function (onFulfilled, onRejected) {\n  if (typeof onFulfilled !== 'function' && this.state === FULFILLED ||\n    typeof onRejected !== 'function' && this.state === REJECTED) {\n    return this;\n  }\n  var promise = new this.constructor(INTERNAL);\n  if (this.state !== PENDING) {\n    var resolver = this.state === FULFILLED ? onFulfilled : onRejected;\n    unwrap(promise, resolver, this.outcome);\n  } else {\n    this.queue.push(new QueueItem(promise, onFulfilled, onRejected));\n  }\n\n  return promise;\n};\nfunction QueueItem(promise, onFulfilled, onRejected) {\n  this.promise = promise;\n  if (typeof onFulfilled === 'function') {\n    this.onFulfilled = onFulfilled;\n    this.callFulfilled = this.otherCallFulfilled;\n  }\n  if (typeof onRejected === 'function') {\n    this.onRejected = onRejected;\n    this.callRejected = this.otherCallRejected;\n  }\n}\nQueueItem.prototype.callFulfilled = function (value) {\n  handlers.resolve(this.promise, value);\n};\nQueueItem.prototype.otherCallFulfilled = function (value) {\n  unwrap(this.promise, this.onFulfilled, value);\n};\nQueueItem.prototype.callRejected = function (value) {\n  handlers.reject(this.promise, value);\n};\nQueueItem.prototype.otherCallRejected = function (value) {\n  unwrap(this.promise, this.onRejected, value);\n};\n\nfunction unwrap(promise, func, value) {\n  immediate(function () {\n    var returnValue;\n    try {\n      returnValue = func(value);\n    } catch (e) {\n      return handlers.reject(promise, e);\n    }\n    if (returnValue === promise) {\n      handlers.reject(promise, new TypeError('Cannot resolve promise with itself'));\n    } else {\n      handlers.resolve(promise, returnValue);\n    }\n  });\n}\n\nhandlers.resolve = function (self, value) {\n  var result = tryCatch(getThen, value);\n  if (result.status === 'error') {\n    return handlers.reject(self, result.value);\n  }\n  var thenable = result.value;\n\n  if (thenable) {\n    safelyResolveThenable(self, thenable);\n  } else {\n    self.state = FULFILLED;\n    self.outcome = value;\n    var i = -1;\n    var len = self.queue.length;\n    while (++i < len) {\n      self.queue[i].callFulfilled(value);\n    }\n  }\n  return self;\n};\nhandlers.reject = function (self, error) {\n  self.state = REJECTED;\n  self.outcome = error;\n  var i = -1;\n  var len = self.queue.length;\n  while (++i < len) {\n    self.queue[i].callRejected(error);\n  }\n  return self;\n};\n\nfunction getThen(obj) {\n  // Make sure we only access the accessor once as required by the spec\n  var then = obj && obj.then;\n  if (obj && typeof obj === 'object' && typeof then === 'function') {\n    return function appyThen() {\n      then.apply(obj, arguments);\n    };\n  }\n}\n\nfunction safelyResolveThenable(self, thenable) {\n  // Either fulfill, reject or reject with error\n  var called = false;\n  function onError(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.reject(self, value);\n  }\n\n  function onSuccess(value) {\n    if (called) {\n      return;\n    }\n    called = true;\n    handlers.resolve(self, value);\n  }\n\n  function tryToUnwrap() {\n    thenable(onSuccess, onError);\n  }\n\n  var result = tryCatch(tryToUnwrap);\n  if (result.status === 'error') {\n    onError(result.value);\n  }\n}\n\nfunction tryCatch(func, value) {\n  var out = {};\n  try {\n    out.value = func(value);\n    out.status = 'success';\n  } catch (e) {\n    out.status = 'error';\n    out.value = e;\n  }\n  return out;\n}\n\nPromise.resolve = resolve;\nfunction resolve(value) {\n  if (value instanceof this) {\n    return value;\n  }\n  return handlers.resolve(new this(INTERNAL), value);\n}\n\nPromise.reject = reject;\nfunction reject(reason) {\n  var promise = new this(INTERNAL);\n  return handlers.reject(promise, reason);\n}\n\nPromise.all = all;\nfunction all(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var values = new Array(len);\n  var resolved = 0;\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    allResolver(iterable[i], i);\n  }\n  return promise;\n  function allResolver(value, i) {\n    self.resolve(value).then(resolveFromAll, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n    function resolveFromAll(outValue) {\n      values[i] = outValue;\n      if (++resolved === len && !called) {\n        called = true;\n        handlers.resolve(promise, values);\n      }\n    }\n  }\n}\n\nPromise.race = race;\nfunction race(iterable) {\n  var self = this;\n  if (Object.prototype.toString.call(iterable) !== '[object Array]') {\n    return this.reject(new TypeError('must be an array'));\n  }\n\n  var len = iterable.length;\n  var called = false;\n  if (!len) {\n    return this.resolve([]);\n  }\n\n  var i = -1;\n  var promise = new this(INTERNAL);\n\n  while (++i < len) {\n    resolver(iterable[i]);\n  }\n  return promise;\n  function resolver(value) {\n    self.resolve(value).then(function (response) {\n      if (!called) {\n        called = true;\n        handlers.resolve(promise, response);\n      }\n    }, function (error) {\n      if (!called) {\n        called = true;\n        handlers.reject(promise, error);\n      }\n    });\n  }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/lie/lib/browser.js\n ** module id = 5\n ** module chunks = 0\n **/","'use strict';\nvar Mutation = global.MutationObserver || global.WebKitMutationObserver;\n\nvar scheduleDrain;\n\n{\n  if (Mutation) {\n    var called = 0;\n    var observer = new Mutation(nextTick);\n    var element = global.document.createTextNode('');\n    observer.observe(element, {\n      characterData: true\n    });\n    scheduleDrain = function () {\n      element.data = (called = ++called % 2);\n    };\n  } else if (!global.setImmediate && typeof global.MessageChannel !== 'undefined') {\n    var channel = new global.MessageChannel();\n    channel.port1.onmessage = nextTick;\n    scheduleDrain = function () {\n      channel.port2.postMessage(0);\n    };\n  } else if ('document' in global && 'onreadystatechange' in global.document.createElement('script')) {\n    scheduleDrain = function () {\n\n      // Create a <script> element; its readystatechange event will be fired asynchronously once it is inserted\n      // into the document. Do so, thus queuing up the task. Remember to clean up once it's been called.\n      var scriptEl = global.document.createElement('script');\n      scriptEl.onreadystatechange = function () {\n        nextTick();\n\n        scriptEl.onreadystatechange = null;\n        scriptEl.parentNode.removeChild(scriptEl);\n        scriptEl = null;\n      };\n      global.document.documentElement.appendChild(scriptEl);\n    };\n  } else {\n    scheduleDrain = function () {\n      setTimeout(nextTick, 0);\n    };\n  }\n}\n\nvar draining;\nvar queue = [];\n//named nextTick for less confusing stack traces\nfunction nextTick() {\n  draining = true;\n  var i, oldQueue;\n  var len = queue.length;\n  while (len) {\n    oldQueue = queue;\n    queue = [];\n    i = -1;\n    while (++i < len) {\n      oldQueue[i]();\n    }\n    len = queue.length;\n  }\n  draining = false;\n}\n\nmodule.exports = immediate;\nfunction immediate(task) {\n  if (queue.push(task) === 1 && !draining) {\n    scheduleDrain();\n  }\n}\n\n\n\n/*****************\n ** WEBPACK FOOTER\n ** ./~/immediate/lib/browser.js\n ** module id = 6\n ** module chunks = 0\n **/","import * as BlobUtil from \"blob-util\";\n\nlet fileProviders = [];\nlet assetLoaders = [];\nlet assets = {};\nlet placeholders = {};\nlet loadingQueue = [];\n\nlet AssetPlaceholder = (spec) => {\n  let self = {spec, id: spec.id};\n\n  let state = {};\n\n  self.state = \"unbound\";\n  \n  self.promise = new Promise((resolve, reject) => {\n    state.resolve = resolve;\n    state.reject = reject;\n  });\n\n  self.promise.then((value) => {\n    self.state = \"loaded\";\n    self.value = value;\n  }, (err) => {\n    self.state = \"error\";\n    self.error = err;\n  });\n  \n  self.bind = (promise) => {\n    self.state = \"loading\";\n    promise.then(state.resolve, state.reject);\n    return self.promise;\n  };\n\n  self.dependencies = [];\n  self.dependants = [];\n  \n  self.depend = (id) => {\n    let ph = AssetManager.getPlaceholder(id);\n    if(!ph) {\n      throw \"No such asset '\" + id + \"' has been discovered\";\n    }\n    let verifyDepTree = (node) => {\n      if(node.id == self.id) {\n        return [self.id];\n      }\n      \n      for(let i = 0; i < node.dependencies.length; i++) {\n        let loop = verifyDepTree(i);\n        if(loop) {\n          return loop.push(node.id);\n        }\n      }\n    };\n    let loop = verifyDepTree(ph);\n    if(!loop) {\n      self.dependencies.push(ph);\n      ph.dependants.push(self);\n      return ph.promise;\n    } else {\n      throw \"Dependency loop: \" + loop.join(\" -> \");\n    }\n  };\n  \n  return self;\n};\n\nexport let AssetManager = {\n  GroupDownloadState: {\n    DISCOVERING: {\n      description: \"Discovering assets\"\n    },\n    DOWNLOADING: {\n      description: \"Downloading assets\"\n    }\n  },\n\n  getFile(file) {\n    let attempt = (i) => {\n      let provider = fileProviders[i];\n      return provider.getFile(file).catch((error) => {\n        if(i < fileProviders.length - 1) {\n          return attempt(i+1);\n        } else {\n          throw error;\n        }\n      });\n    };\n    return attempt(0);\n  },\n\n  getPlaceholder(id) {\n        if(!placeholders[id]) {\n      throw \"No such asset '\" + id + \"' has been discovered\";\n    }\n    return placeholders[id];\n  },\n\n  getAsset(id) {\n    if(!placeholders[id]) {\n      throw \"No such asset '\" + id + \"' has been discovered\";\n    }\n    if(!placeholders[id].value) {\n      throw \"Asset '\" + id + \"' has not yet been loaded\";\n    }\n    return placeholders[id].value;\n  },\n  \n  downloadAssetGroup(name) {\n    let promise = this.getFile(name + \".asgroup\").then((blob) => {\n      return BlobUtil.blobToBinaryString(blob)\n    }, (err) => {\n      throw err + \" while discovering assets in group \" + name;\n    }).then((string) => {\n      return JSON.parse(string);\n    }).then((json) => {\n      for(let i = 0; i < json.length; i++) {\n        let spec = json[i];\n        loadingQueue.push(placeholders[spec.id] = AssetPlaceholder(spec));\n      }\n\n      let promises = [];\n      for(let i = 0; i < loadingQueue.length; i++) {\n        let placeholder = loadingQueue[i];\n\n        let foundLoader = false;\n        for(let j = 0; j < assetLoaders.length; i++) {\n          if(assetLoaders[j].canLoad(placeholder)) {\n            foundLoader = true;\n            promises.push(placeholder.bind(assetLoaders[j].load(placeholder)).catch((err) => {\n              throw err + \" while loading \" + placeholder.spec.id;\n            }));\n            break;\n          }\n        }\n\n        if(!foundLoader) {\n          throw \"No loader found for spec \" + JSON.stringify(placeholder.spec);\n        }\n      }\n\n      return Promise.all(promises);\n    });\n\n    promise.dlState = this.GroupDownloadState.DISCOVERING;\n    return promise;\n  },\n  addFileProvider(provider) {\n    fileProviders.push(provider);\n    fileProviders.sort((a, b) => {\n      return Math.sign(b.priority - a.priority)\n    });\n  },\n  addAssetLoader(loader) {\n    assetLoaders.push(loader);\n  },\n};\n\nAssetManager.addFileProvider({ // download over the network\n  priority: -1000,\n  getFile(name) {\n    return fetch(\"/assets/\" + name).then((response) => {\n      if(!response.ok) {\n        throw \"HTTP \" + response.status + \" \" + response.statusText + \" while downloading /assets/\" + name;\n      }\n      return response.blob();\n    });\n  }\n});\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/assetmgr.js\n **/","export let Mat4 = {  \n  create: () => {\n    let multBuffer = [[],[],[],[]];\n\n    let gl = new Float32Array(16);\n    \n    let self = {\n      val: [\n        [1, 0, 0, 0],\n        [0, 1, 0, 0],\n        [0, 0, 1, 0],\n        [0, 0, 0, 1]\n      ],      \n\n      toGL() {\n        for(let i = 0; i < 4; i++) {\n          for(let j = 0; j < 4; j++) {\n            gl[i * 4 + j] = self.val[i][j];\n          }\n        }\n\n        return gl;\n      },\n      \n      copy(src) {\n        for(let i = 0; i < 4; i++) {\n          for(let j = 0; j < 4; j++) {\n            self.val[i][j] = src.val[i][j];\n          }\n        }\n      },\n\n      load: {\n        identity() {\n          self.copy(Mat4.identity);\n        },\n        \n        translate(x, y, z) {\n          self.load.identity();\n          self.val[3][0] = x;\n          self.val[3][1] = y;\n          self.val[3][2] = z;\n        },\n\n        scale(x, y, z) {\n          self.load.identity();\n          self.val[0][0] = x;\n          self.val[1][1] = y;\n          self.val[2][2] = z;\n        },\n\n        rotate(rad) {\n          self.load.identity();\n          self.val[0][0] = Math.cos(rad);\n          self.val[1][0] = -Math.sin(rad);\n          self.val[0][1] = Math.sin(rad);\n          self.val[1][1] = Math.cos(rad);\n        },\n      },\n\n      multiply(bMat) {\n        let b = self.val;\n        let a = bMat.val;\n\n        for(let i = 0; i < 4; i++) {\n          for(let j = 0; j < 4; j++) {\n            multBuffer[i][j] = 0;\n            for(let k = 0; k < 4; k++) {\n              multBuffer[i][j]+= a[i][k] * b[k][j];\n            }\n          }\n        }\n\n        for(let i = 0; i < 4; i++) {\n          for(let j = 0; j < 4; j++) {\n            self.val[i][j] = multBuffer[i][j];\n          }\n        }\n      }\n    }\n\n    return self;\n  }\n};\n\nMat4.identity = Mat4.create();\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/math.js\n **/","import {AssetManager} from \"../assetmgr.js\";\nimport {Colors} from \"../gfxutils.js\";\n\nimport {LoaderState} from \"./loader.js\";\n\nexport let PreloaderState = (game) => {\n  let render = game.render;\n\n  let time = 0;\n  let uniformTickTimer = 0;\n\n  let promise;\n  \n  return {\n    initialize() {\n      promise = AssetManager.downloadAssetGroup(\"base\");\n      promise.then(() => {\n        game.switchState(LoaderState(game));\n      }, (err) => {\n        console.log(\"failed to load assets: \" + err);\n      });\n    },\n    \n    uniformTick() { // 200hz\n    },\n    \n    tick(delta) { // variable framerate\n      time+= delta;\n      uniformTickTimer+= delta;\n\n      if(uniformTickTimer > 5) {\n        uniformTickTimer-= 5;\n        this.uniformTick();\n      }\n      \n      render.clear(Colors.BLACK);\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/states/preloader.js\n **/","export let Color = (r, g, b, a) => {\n  return {\n    r, g, b, a\n  };\n};\n\nexport let Colors = {\n  BLACK: Color(0, 0, 0, 1),\n  WHITE: Color(1, 1, 1, 1),\n  RED: Color(1, 0, 0, 1),\n  GREEN: Color(0, 1, 0, 1),\n  BLUE: Color(0, 0, 1, 1)\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/gfxutils.js\n **/","import {AssetManager} from \"../assetmgr.js\";\nimport {Colors} from \"../gfxutils.js\";\nimport {Mat4} from \"../math.js\";\n\nexport let LoaderState = (game) => {\n  let render = game.render;\n  let hud = render.createLayer(AssetManager.getAsset(\"base.shader.flat.color\"));\n  let main = render.createLayer(AssetManager.getAsset(\"base.shader.flat.color\"));\n  let tex = render.createLayer(AssetManager.getAsset(\"base.shader.flat.textured\"));\n  let rects = hud.createRectDrawer();\n  let mr = main.createRectDrawer();\n  let texdrawer = main.createRectDrawer();\n  let workingMatrix = Mat4.create();\n  let time = 0;\n  \n  return {\n    initialize() {\n    },\n\n    tick(delta) {\n      time+= delta;\n      \n      render.clear(Colors.BLUE);\n\n      hud.matrix.load.identity();\n      main.matrix.load.identity();\n      tex.matrix.load.identity();\n      \n      workingMatrix.load.scale(2/render.width(), -2/render.height(), 1); // scale down to pixels and flip\n      hud.matrix.multiply(workingMatrix);\n      main.matrix.multiply(workingMatrix);\n      tex.matrix.multiply(workingMatrix);\n      \n      workingMatrix.load.translate(\n        render.width() / -2,\n        render.height() / -2, 0);\n      hud.matrix.multiply(workingMatrix); // make origin upper-left corner\n      tex.matrix.multiply(workingMatrix);\n\n      workingMatrix.load.translate(\n        render.width() % 2 / 2 + 0,\n        render.height() % 2 / 2, 0); // align to pixels\n      main.matrix.multiply(workingMatrix);\n\n      workingMatrix.load.rotate(time / 500.0);\n      main.matrix.multiply(workingMatrix);\n      \n      rects.drawColoredRect(Colors.GREEN, 0, 0, 300, 300);\n      mr.drawColoredRect(Colors.RED, -50, -50, 50, 50);\n\n      \n      \n      hud.flush();\n      main.flush();\n      tex.flush();\n    }\n  };\n};\n\n\n\n/** WEBPACK FOOTER **\n ** ./js/states/loader.js\n **/"],"sourceRoot":""}